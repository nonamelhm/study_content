<template>
  <div>
    <div id="map" class="hotmap"></div>
  </div>
</template>

<script>
  import "@/assets/css/leaflet.css"
  import "@/assets/js/leaflet.js"
  import "@/assets/js/leaflet-heatmap.js"
  export default {
    mounted() {
      this.init()
      console.log(L.heatLayer)
    },
    methods: {
      init() {
        var tiandituI = L.layerGroup([
          L.tileLayer(
            'http://t4.tianditu.gov.cn/DataServer?T=img_w&x={x}&y={y}&l={z}&tk=5bb740ffd3a80fb3963e022454eca6e2'),
          L.tileLayer(
            'http://t4.tianditu.gov.cn/DataServer?T=cia_w&x={x}&y={y}&l={z}&tk=5bb740ffd3a80fb3963e022454eca6e2')
        ])
        // 初始化地图信息
        var map = L.map('map', {
          // crs: L.CRS.EPSG4326,
          layers: [tiandituI],
          center: [0, 0],
          maxZoom: 18,
          zoom: 1
        })
        //定义热力点数量，加热力半径
        var heatNumbers = 150,
          heatRadius = 30
        //加热力坐标信息数组
        var heatPoints = [
          [35.460756, 119.59847, 1.0],
          [35.459033, 119.595783, 3.0],
          [35.458163, 119.595238, 1.0],
          [35.457626, 119.594805, 1.0],
          [35.457133, 119.594663, 1.0],
          [35.456638, 119.59475, 3.0],
          [35.455795, 119.59609, 1.0],
          [21.8498516, 113.3961266, 1.0],
          [21.8509066, 113.3958533, 1.0],
          [21.8530833, 113.39521, 1.0],
          [21.8551066, 113.3946716, 1.0],
          [21.8562133, 113.3943366, 1.0],
          [21.8627816, 113.3920066, 1.0],
          [21.865365, 113.3908766, 1.0],
          [21.8675816, 113.3896683, 1.0],
          [21.8685666, 113.3891933, 1.0],
          [21.8698133, 113.3886616, 1.0],
          [21.870275, 113.3884333, 1.0],
          [21.8720116, 113.3871416, 1.0],
          [21.873935, 113.38606, 1.0],
          [21.875445, 113.3853533, 1.0],
          [21.8767083, 113.3846616, 1.0],
          [21.878065, 113.3838733, 1.0],
          [21.8785016, 113.3835933, 1.0],
          [21.8789766, 113.3833816, 1.0],
          [21.8800816, 113.3829983, 1.0],
          [21.8824066, 113.3822416, 1.0],
          [21.8836516, 113.3818616, 1.0],
          [21.8860483, 113.3813083, 1.0],
          [21.88728, 113.3809, 1.0],
          [21.8888616, 113.3803116, 1.0],
          [21.8893466, 113.3801166, 1.0],
          [21.89123, 113.3796433, 1.0],
          [21.8962433, 113.378585, 1.0],
          [21.8982483, 113.3781883, 1.0],
          [21.9002933, 113.3778383, 1.0],
          [21.902295, 113.377415, 1.0],
          [21.9043083, 113.37709, 1.0],
          [21.9063183, 113.3768133, 1.0],
          [21.910295, 113.376055, 1.0],
          [21.9133033, 113.3755116, 1.0],
          [21.916415, 113.37488, 1.0],
          [21.9176716, 113.374665, 1.0],
          [21.922025, 113.3737466, 1.0],
          [21.9251316, 113.3729783, 1.0],
          [21.9263583, 113.3726183, 1.0],
          [21.9293316, 113.3714133, 1.0],
          [21.932495, 113.37008, 1.0],
          [21.933655, 113.369535, 1.0],
          [21.93549, 113.3685833, 1.0],
          [21.9377083, 113.3675716, 1.0],
          [21.9397266, 113.3667933, 1.0],
          [21.9409266, 113.366295, 1.0],
          [21.9428483, 113.3656066, 1.0],
          [21.9468, 113.3640816, 2.0],
          [21.94842, 113.3637216, 1.0],
          [21.95055, 113.3633883, 1.0],
          [21.9518083, 113.36321, 1.0],
          [21.9534533, 113.36308, 1.0],
          [21.95496, 113.3627983, 1.0],
          [21.9561916, 113.362505, 1.0],
          [21.9602833, 113.36147, 1.0],
          [21.9615166, 113.3611016, 1.0],
          [21.9650166, 113.3597633, 1.0],
          [21.9672766, 113.3588583, 1.0],
          [21.97042, 113.35778, 1.0],
          [21.977235, 113.354955, 1.0],
          [21.9825633, 113.35223, 1.0],
          [21.9842466, 113.351505, 1.0],
          [21.9853383, 113.3510916, 1.0],
          [21.9865583, 113.3506616, 1.0],
          [21.9900383, 113.3498983, 1.0],
          [21.9913016, 113.3498933, 1.0],
          [21.9926916, 113.3500316, 1.0],
          [21.99367, 113.35037, 1.0],
          [21.9959533, 113.3516116, 1.0],
          [21.9977716, 113.352635, 1.0],
          [21.998425, 113.353025, 1.0],
          [21.9988516, 113.353235, 2.0],
          [21.9993416, 113.35333, 1.0],
          [21.999885, 113.3531933, 2.0],
          [22.0003316, 113.3529233, 2.0],
          [22.000675, 113.3525683, 2.0],
          [22.0009016, 113.3520966, 30.0],
          [22.0013633, 113.3521366, 262.0],
          [22.0009016, 113.3520966, 2.0],
          [22.000675, 113.3525683, 2.0],
          [22.0003316, 113.3529233, 2.0],
          [21.999885, 113.3531933, 1.0],
          [21.9993416, 113.35333, 2.0],
          [21.9988516, 113.353235, 1.0],
          [21.998425, 113.353025, 1.0],
          [21.9977716, 113.352635, 1.0],
          [21.9959533, 113.3516116, 1.0]
        ]
        //调用渲染方法，传入半径，透明度参数，添加到地图
        L.heatLayer(heatPoints, {
          radius: heatRadius,
          minOpacity: 0.5
        }).addTo(map);

      }
    },
  }
</script>

<style scoped>
  .hotmap {
    position: absolute;
    left: 0px;
    right: 0px;
    width: 800px;
    height: 500px;
  }
</style>
